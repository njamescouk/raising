<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang xml:lang>
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <meta name="author" content="Nick James" />
  <title>rpal version 1.0</title>
  <style type="text/css">
      /* code{white-space: pre-wrap;} */
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <style type="text/css">body{background-color: LightYellow;max-width: 30em;margin-left: 10em;margin-right: auto;text-align: justify;}h1, h2{font-size: large;}h3, h4{font-size: medium;}pre, pre.programlisting, pre.synopsis {background-color: #FFFFFF;border: 1px solid #DDDDDD;color: #000000;float: left;line-height: 1;margin-top: 0.1em;min-width: 90%;padding: 1em 1em 1.5em;}p, h1, h2, h3 , h4, dl{clear: both;}div.insertedFile{border: 1px dotted darkgray;padding-left: 1em;padding-right: 1em;}a:link {color: #005000;}a:visited {color: #A05010;}a:focus {background-color: #EEEE99;color: #009900;}a:hover {background-color: #EEEE99;border: 1px dashed #DDDDDD;color: #009900;}a {border: 1px dotted #DDDDDD;text-decoration: none;}ul{list-style-type: square;}nav#TOC ul{list-style-type: none;padding-left: 2em;}nav#TOC>ul{padding-left: 0;}h1, h2{padding-top: 1em;}table{width: 40em;text-align: left;vertical-align: top;margin-top: 1em;margin-bottom: 1em;}tbody{vertical-align: top;}th{border: 1px solid grey;padding: .3em;}td{border: 1px dotted grey;padding: .3em;}tr.even{background-color: PaleGreen;}row[parity="even"]{background-color: PaleGreen;}p{margin-top: .25em;margin-bottom: .25em;}.warning{color: red;font-size: large;}div.YGrammar{text-align: left;}</style>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<header>
<h1 class="title">rpal version 1.0</h1>
<p class="author">Nick James</p>
<p class="date">05-03-2018</p>
</header>
<nav id="TOC">
<ul>
<li><a href="#introduction"><span class="toc-section-number">1</span> Introduction</a></li>
<li><a href="#installation"><span class="toc-section-number">2</span> Installation</a></li>
<li><a href="#synopsis"><span class="toc-section-number">3</span> Synopsis</a></li>
<li><a href="#action"><span class="toc-section-number">4</span> Action</a></li>
<li><a href="#example"><span class="toc-section-number">5</span> Example</a></li>
<li><a href="#bugs"><span class="toc-section-number">6</span> Bugs</a></li>
<li><a href="#building"><span class="toc-section-number">7</span> Building</a></li>
<li><a href="#colophon"><span class="toc-section-number">8</span> Colophon</a></li>
</ul>
</nav>
<h1 id="introduction"><span class="header-section-number">1</span> Introduction</h1>
<p>This is the visualisation code for the “raising preserving arc length” part of “<a href="raising.pdf">Quantifying the Effects of Raising</a>”. Having used <a href="https://github.com/njamescouk/pbmGetProfile">pbmGetProfile</a> (or some other method) to get a table of values of (radius, height), rpal will produce a visualisation of the theoretical wall thickness.</p>
<h1 id="installation"><span class="header-section-number">2</span> Installation</h1>
<p>windows : download the <a href="path/to/release/goes/here">zip file</a>, extract to location of your choice.</p>
<p>The file system is like this:</p>
<pre><code>├───doc
├───example
└────source
    └───dependencies
        ├───csv
        ├───parseCmdline
        │   └───source
        ├───split_string
        └───yacc</code></pre>
<p><a href="../example">example</a> <em>should</em> have everything you need, on windows at least.</p>
<p><a href="../source">source</a> has rpal source plus source of dependencies plus supporting dlls for the compiler. That should get you going on windows at least.</p>
<p>linux : In addition I’m afraid you’ll have port <code>source\compile.bat</code> to linux and compile the source. You’ll have the compiler already.</p>
<h1 id="synopsis"><span class="header-section-number">3</span> Synopsis</h1>
<pre><code>rpal [-d | -h | -i | -t | -v | -w] profile_csv_file</code></pre>
<p>options are:</p>
<pre><code>-d          : dump profile data
-h          : this help
-i          : write summary info
-t          : thickness of initial disc (default 1)
-v          : version
-w          : interval over which to compute tangent (default 1)</code></pre>
<h1 id="action"><span class="header-section-number">4</span> Action</h1>
<p>first use</p>
<pre><code>pbmgetProfile profile_file.pbm &gt; profile_csv_file</code></pre>
<p>then</p>
<pre><code>rpal profile_csv_file &gt; profile_csv_file.svg</code></pre>
<p>gets the profile as svg.</p>
<p>If the csv input file has been generated by some other means, be aware that the first line has to be <code>&quot;radius&quot;,&quot;height&quot;</code> followed by an arbitrary number of comma separated integer pairs, one pair per line.</p>
<p>We read the csv file and order it by height, then compute arc length and normal to the tangent for each height. Thickness at each height is computed using the formula<br />
<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPMAAABKCAYAAABuM2KCAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAhdEVYdENyZWF0aW9uIFRpbWUAMjAxODowMjoyMSAyMzo0NDoxMxtZxXYAAA1BSURBVHhe7V0FjBS/F364u7u7uztBEyC4uzskOASCBHd3CwQI7u7u7hDc3b2/fv0z+99buZ1dbpdh5r3kcrc7baf9+l77rL1QQhIxMQKMwD+PQOh/fgQ8AEaAEVAIsDAzIzACJkGAhdkkE8nDYARYmJkHGAGTIMDCbJKJ5GEwAizMzAOMgEkQYGE2yUTyMBgBFmbmAUbAJAiwMJtkInkYjAALM/MAI2ASBFiYTTKRPAxGgIWZeYARMAkCLMwmmUgeBiPAwsw8wAiYBAEWZpNMJA+DEQjF55l9Z4JChQpR2LBhKXfu3BQlShQ6cOAAHTlyhNq2bUsRI0akx48f044dO2jy5MlUp04d31/ENRkBHQiwMOsAyVWRGzdu0KxZs2j06NG2x3Xr1lUCvG/fPtt3c+bMofTp01Px4sV9fBNXYwT0IcBqtj6cnEpt2bKFBg0aFOT7vXv3UpkyZYJ8h507Y8aMPr6FqzEC+hFgYdaJ1a9fv+jHjx+20pkzZ1aqtUbXrl2jp0+fUsmSJYO0mCJFCoofP77Ot3AxRsB3BFjN9oDdu3fvaMyYMZQtWzb6+vUrvXnzhjp27OhUa+bMmdSlSxdC+fDhw/s+I1yTEfARAd6ZPQDXp08fZe/WqlWL8uXLR7CBXdHu3bupYMGCLMg+MiJX+3MEWJg9YHjp0iVavHgxnThxgpIlS0br1q1zWQNOr9KlS//5jHALjICPCLAwewBu4MCBSpDz589P2bNnJ9jOjuTOXvZxTrgaI+ATAizMwcB2584dpTpfvnyZrl69SnBmzZs3z6kGvNgRIkRQZZkYgb+FAAuzG+Q/fvxImTJlooMHD6oSGTJkoKJFi1KWLFmcarC9/LfYl99rjwALsxt+QAZXmzZt1G778+dP2r9/P71//96WyfX8+XPavHkzTZ8+ndauXUv4xyCIPZ89e5Y57B9DYPbs2fT27VtdvZ42bRp9//5dV9lAF+LQVDCIf/r0SQnot2/fVGgqa9asttIvX75UqjfCUKFDh1a2NOLQMWLEIMSgA03379+nDh06qPTRkydPutQgAt2nf+F9kyZNUkk95cqV09Xde/fu0dKlS6l37966ygeykGGFGWmSyZMn55xmL7gBC0rUqFGVw86VOeBFU5Yoevv2bRo5ciQhR8Abmjp1qnKGFitWzJtqfi9rWDUbACdMmNDvAJjpBdAQIkWKZKYh+XUsQ4cOpfbt23v9jqZNmzql8nrdiB8qGFKYHz16RFAb2TvshxnnJhUC0GJgJuXIkcNrRJDGGzNmTILKbSQylJp98+ZNWrBgAV25ckUdJWzWrBkVLlyYKleubCTMAtIXeNEXLVqknC1JkyalChUqqFNaoUKFojx58lCnTp2of//+9PDhQ4oVKxaNGzdO9StOnDi0bds2QrILyh4/flzZd2hDI2SxwR8QJkwYunv3rtplIkeOrFROOPVw+itBggTKk48FtXbt2qqqu3ruAMGRUIT1kJsOPwL+xmkztA8TKhB08eJF2rlzp3JQwp/RvHlz9Vok+WA8SAhyRbt27aIHDx4ofwh8Ji1atAhSbOLEiQrfzp07B2IYut5hKGHWeozzwPHixaMhQ4a4HQRiwCNGjFCT5ImQjtmgQQNPxQz3/NChQyqVFPne2A0OHz5M1apVo2fPnqm+fv78mSpWrEjbt2+3pZFCmOGFB3YQVggoGFpj2lGjRtH169dtaakLFy5Uwg+nDgh553gOxxCEAAvshAkTyFM9V+DhHHfVqlWV8xD1W7durXa0GTNmUL169ZyqhPScAhe8a+XKlUookY6LRQ+2Ln5joezVq5dTP+BzgIcbiyeoSpUqqnzatGltZTds2EArVqxwuxj8FWbC5QRGI7mKiz179njslvQoixcvXnj8+fLli8e2jFpAxreFDH2p7slMMyFtYnHq1Cn1WTpwhGSqIF2PHTu2kExm+27VqlUib9686rOMnQsZchNy17E9lyaNkDuMkIdI1HfSjhQynh6kTT31HPFD386dOyc2bdokpBAIGd5TRaT5FCzUITWnr1+/FnHjxlW8oVH16tVFv3791McePXoIKegu+yI1HtGoUSMhF1H1HOWkWh6krNRahPSAG4ptDLczv3r1ihInTqzifsiqCgRh90I4J5AEtdlRdXP1/mHDhtGZM2fU7oKYNkJiwAg7BT63atVK3XaiEXZmqMoFChRQXyGXXDKw2p2hcuN7qIgopxHKYBfCron3IT0VKr5Geuq5w65nz56EBBx4gANJGCPi/3JTsL0WHn5g3r17d2rXrh3hppjGjRs7devYsWNUtmxZkpuA0ozgjLXflVFBLlSqDWhLRiHDCfP69etp7NixQW7rcAUWmFqu+rrUbGRv/avONKieyETDWWkIGFQ+MCHsOTBs165dg8DjSpj79u2rbGgIKWKqUJ3TpEnjkgchzAjZzJ071/ZcTz13DA3VFqpszZo1PfJ8SM5pqVKl1DsRewfBqQq/AXwxWNDgb0iUKJHtuWPnYMJgUZwyZYq6Agr5BvYEfwBMB6jbRiHDebPhmChRooTCB46wo0ePusQKyRpSjdL1Ez16dKPg7XU/UqZMSbly5aJu3bopIYbjKHXq1Oq6IjjCvCFcX5QqVSqCLW5P2Hnh5HFHvtZDxhy0Cm0+PfU1pOYUYwHfVKpUyfZK+AbgSNU0liRJkqgrnhwJDjI4DBHiq1GjhhLYcOHCOZWT6rtaDAxFhlL6ZWekd1DMnz9fwM6VO4/Rumfrj3SeiFu3bunqn3Qo6SrnrpBMIRSwnTWSzhkhBdqpuNythWQ8IZ1dAv2TTC3kxQpCMp2QqrkqD1sPNvSTJ0/UZ7njC+ngUn9LD7eQEQQhVUwB29Wegqvnrt9yNxNSE/ijsftSWabeCmkyKHsdJB1aokiRIrYx4zsZlhJSuJ2al45SARxBsJPBj5qPwr6w1HbEsmXLfOme3+oYTs2WTEZr1qxRoRJ4PI14awe8oLhVBKs2Mq48Eexx2Fh6bGRXbcF/gJNZ8AyDsONB7dNCRpoaibAe8EJaKXbxDx8+KFsZXm3sVvBUQ0tBfHTJkiXqb2g3aAdhFrmIEnLO8TfGiOQI+C80clfP3fhhT8JMqF+/vieIQvQ5kkFgSmCXxW8pPSqaAXXZnuDVBq7ARyOYMzDf4IcADjhcA23GkcqXL6/8GNGiRQvRvv9RY35bJkzcsHTqiAsXLng1QukAEtJu9aoOF/YNAWkvK+3EE8Fzv3r1ak/FnJ7LWLmQ9rjX9fxdAasWkxcIQD1r2LChFzX+V1Q6VJT6yuRfBGBaIPymqcrBvQ3hOBn7dgo7eeqhdKoJueN7Khbw54ZzgP2RmhGAyvDyIinDW4KKh1NXSEhg8h8CSNGEgxAOLk8EkwSmB6InegnhLnjo3UUD9Lbjj3IszG5Qlc4tQkofQhT2hGyp4MJcSI/cunWry7xdhEtkEoc/5pHb/I0Ass3Onz+vGw+Ux7zoPc8MP0OTJk10tx/IgizMDmgjZxmJGNImVvnJuKQPDicQnDlIZLFP0rCvriVnIPyxceNG2y0lWhms6I7xykBOtlXeZe/Q0jNmhPiQt62HjHxpIwuzwwxi1UW+M3KgoRbjGKaWDYWTXO5ii/AaQ4VGLBMHH3CVEHKq7Qn55miDiRHwBwIszHaoIpkCPzKH1/YtUieRbQXCAQd3KzhCP0gdbNmypVKlly9fHiRpAfWxoyNshGuImBiBkEaAhdkOUcRZsSNrhDOvULdz5sypvtJiuK4mAf8JEllGOHGEuK199pF9ecQ8vVUDQ3rSuT1zIsDCbDevcHjZ5xDjPi2Qdj8UbGhXjhKozjhCiOQIXPwH2xq/HS9+w66sJ8nEnKzGo/I3AizMvxGGQEIItWwfqMI4dIDDDLCBQenSpVOHEBwJZZBJpBHUaZy2cczpRTYS/0dIf7O0ddsPI2+ZGGTd4f9/5Dj9glRSCCK81+PHj1eXCdofokfyPexh2NT2xzMRrtBSIE+fPq2O3g0fPtxpF8YpHByc+FdPcDGfGBsBw+Vm/y24kMeLXXnAgAHK4WV/zY59n3ADB879Op6DhUqNGDNymZFX7opwCgfnkPGfMZgYgZBGgNXs34hCTUbyAMidIOMZDh9gh3UkqNQ4wO5OkLFAIAuMBTmkWZjb0xDgnVkigUvxYA/DueXq7KojuyAEBeGUV8vo5iSErAYPHhzkFJLuylyQEdCBAO/MEiTYybjWRo8gA1Ps4LgKB2EoPQRPNy6zsz9OqKcel2EEvEGAd2Zv0HIoi0QRPeetYU/rXSj+oDtc1eIIsDBbnAF4+OZBgNVs88wlj8TiCLAwW5wBePjmQYCF2TxzySOxOAIszBZnAB6+eRBgYTbPXPJILI4AC7PFGYCHbx4EWJjNM5c8EosjwMJscQbg4ZsHARZm88wlj8TiCLAwW5wBePjmQYCF2TxzySOxOAIszBZnAB6+eRBgYTbPXPJILI4AC7PFGYCHbx4EWJjNM5c8EosjwMJscQbg4ZsHARZm88wlj8TiCLAwW5wBePjmQeA/Cw8nPske1+wAAAAASUVORK5CYII=" /></p>
<p>ρ(s) is the radius at arc length s.</p>
<p>The normal is computed by calculating the gradient between points either side of the current point. You can smooth this by using the -w parameter, so that the tangent is computed using points ± -w from the current point.</p>
<p>We then use this data to write a <a href="https://en.wikipedia.org/wiki/Scalable_Vector_Graphics">svg</a> file, which can be exported to a .png file using <a href="https://inkscape.org">inkscape</a> with something along the lines of</p>
<pre><code>&quot;C:\Program Files\Inkscape\inkscape.exe&quot; -y 255 --export-png=filename.png -d 300 filename.svg</code></pre>
<h1 id="example"><span class="header-section-number">5</span> Example</h1>
<p>If we start with <a href="../example/can.csv" class="uri">../example/can.csv</a> as the profile of a raising we get this image of the raising:</p>
<p><img src="data:image/png;base64,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" /></p>
<hr />
<h1 id="bugs"><span class="header-section-number">6</span> Bugs</h1>
<p>yes, but don’t know where.</p>
<h1 id="building"><span class="header-section-number">7</span> Building</h1>
<p>use <code>rpal\source\compile.bat</code></p>
<h1 id="colophon"><span class="header-section-number">8</span> Colophon</h1>
<p>
Produced with:
</p>
<pre>
pp rpal.txt | pandoc --self-contained --toc -N -c devDoc.css -s -t html5 -o rpal.html

</pre>
<p>2018-03-05 16:18:30</p>
</body>
</html>
